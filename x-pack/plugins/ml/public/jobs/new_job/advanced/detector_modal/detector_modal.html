<div class="detector-modal">
  <ml-message-bar ></ml-message-bar>
  <h3>{{title}}</h3>

  <div class="form-group">
    <label>Description</label><i ml-info-icon="new_job_detector_description" />
    <input
      ng-model="detector.detector_description"
      placeholder="{{ detectorToString(detector) }}"
      class="form-control" />
  </div>

  <div class="editor-color detector_field_form">

    <div class="field-cols">
      <div class="form-group">
        <label>function</label><i ml-info-icon="new_job_detector_function" ></i>
        <field-select
          on-change='setDetectorProperty'
          value='detector.function'
          field='"function"'
          options='functionIds'>
        </field-select>
      </div>
    </div>

    <div class="field-cols">
      <div class="form-group">
        <label>field_name</label><i ml-info-icon="new_job_detector_fieldname"></i>
        <field-select
          on-change='setDetectorProperty'
          value='detector.field_name'
          field='"field_name"'
          options='properties'>
        </field-select>
      </div>
    </div>

    <div class="field-cols">
      <div class="form-group">
        <label>by_field_name</label><i ml-info-icon="new_job_detector_byfieldname"></i>
        <field-select
          on-change='setDetectorProperty'
          value='detector.by_field_name'
          field='"by_field_name"'
          options='properties_byFieldName'>
        </field-select>
      </div>
    </div>

  </div>
  <div class="editor-color detector_field_form">

    <div class="field-cols">
      <div class="form-group">
        <label>over_field_name</label><i ml-info-icon="new_job_detector_overfieldname" ></i>
        <field-select
          on-change='setDetectorProperty'
          value='detector.over_field_name'
          field='"over_field_name"'
          options='properties'>
        </field-select>
      </div>
    </div>

    <div class="field-cols">
      <div class="form-group">
        <label>partition_field_name</label><i ml-info-icon="new_job_detector_partitionfieldname"></i>
        <field-select
          on-change='setDetectorProperty'
          value='detector.partition_field_name'
          field='"partition_field_name"'
          options='properties'>
        </field-select>
      </div>
    </div>

    <div class="field-cols">
      <div class="form-group">
        <label>exclude_frequent</label><i ml-info-icon="new_job_detector_excludefrequent"></i>
        <field-select
          on-change='setDetectorProperty'
          value='detector.exclude_frequent'
          field='"exclude_frequent"'
          options='{all: "", none: ""}'>
        </field-select>
      </div>
    </div>

  </div>
  <small><div class='help-pane'><ml-documentation-help-link ml-uri="{{helpLink.uri}}" ml-label="{{helpLink.label}}"></ml-documentation-help-link></div></small>

  <hr />

  <button
    ng-click="save()"
    ng-disabled="(saveLock === true) || (detector.function === '')"
    class="kuiButton kuiButton--primary"
    aria-label="Save">
    {{ (editMode? "Update" : "Add") }}
  </button>
  <button
    ng-click="cancel()"
    ng-disabled="(saveLock === true)"
    class="kuiButton kuiButton--primary"
    aria-label="Cancel">
    Cancel
  </button>
</div>
